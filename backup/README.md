# PostgreSQL Backup to ps.kz S3

Автоматическая система бэкапов базы данных в объектное хранилище ps.kz.

## Быстрый старт

1. **Получите credentials от ps.kz:**
   - Endpoint URL
   - Access Key ID
   - Secret Access Key
   - Bucket name (или создайте новый)

2. **Следуйте инструкции:**
   - Откройте [SETUP.md](SETUP.md) и выполните все шаги

## Файлы

- `backup-config.env.example` - Пример конфигурации (скопируйте в `backup-config.env`)
- `backup-to-s3.sh` - Скрипт для создания бэкапа и загрузки в S3
- `restore-from-s3.sh` - Скрипт для восстановления из бэкапа
- `SETUP.md` - Полная инструкция по настройке

## Основные команды

### Создать бэкап вручную
```bash
./backup-to-s3.sh
```

### Посмотреть список бэкапов
```bash
./restore-from-s3.sh
```

### Восстановить из бэкапа
```bash
./restore-from-s3.sh postgres-backup-2026-01-27_00-00-00.sql.gz
```

## Параметры

- **Частота бэкапов:** Ежедневно в 00:00 UTC
- **Хранение:** Последние 7 дней
- **Автоудаление:** Старые бэкапы удаляются автоматически
- **Сжатие:** gzip для экономии места

## Безопасность

⚠️ **ВАЖНО:**
- Файл `backup-config.env` содержит секретные данные
- Не коммитьте его в git (уже в .gitignore)
- Права доступа: `chmod 600 backup-config.env`

## Поддержка

При возникновении проблем см. раздел "Устранение неполадок" в [SETUP.md](SETUP.md)
